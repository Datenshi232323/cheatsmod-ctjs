let PingSpoofC00 = []
let PingSpoofC0F = []

register("packetSent", (packet, event) => {
    if (packet.class.getSimpleName() == "C00PacketKeepAlive" && packet.func_149460_c() !== PingSpoofC00[0]) {
        PingSpoofC00.push(packet.func_149460_c())
        cancel(event)
        Client.scheduleTask(60, () => { Client.sendPacket(new net.minecraft.network.play.client.C00PacketKeepAlive(packet.func_149460_c())) })
    } else if (packet.class.getSimpleName() == "C00PacketKeepAlive" && packet.func_149460_c() == PingSpoofC00[0]) {
        PingSpoofC00.splice(0, 1)
    }
    if (packet.class.getSimpleName() == "C0FPacketConfirmTransaction" && packet.func_149533_d() !== PingSpoofC0F[0]?.uid && packet.func_149532_c() !== PingSpoofC0F[0]?.WindowId) {
        PingSpoofC0F.push({ uid: packet.func_149533_d(), WindowId: packet.func_149532_c() })
        cancel(event)
        Client.scheduleTask(20, () => { Client.sendPacket(new net.minecraft.network.play.client.C0FPacketConfirmTransaction(packet.func_149532_c(), packet.func_149533_d(), true)) })
    } else if (packet.class.getSimpleName() == "C0FPacketConfirmTransaction" && packet.func_149533_d() == PingSpoofC0F[0]?.uid && packet.func_149532_c() !== PingSpoofC0F[0]?.WindowId) {
        PingSpoofC0F.splice(0, 1)
    }
}).setPacketClasses([net.minecraft.network.play.client.C00PacketKeepAlive,net.minecraft.network.play.client.C0FPacketConfirmTransaction])
/*
register("tick", (elapsed) => {
    if (elapsed % 40 == 1 && PingSpoofC00.length > 0) {
        Client.sendPacket(new net.minecraft.network.play.client.C00PacketKeepAlive(PingSpoofC00[0]))
    }
})
*/